defaultNamespace: neuvector-system

helm:
  releaseName: neuvector
  repo: https://neuvector.github.io/neuvector-helm/
  chart: core
  version: v1.9.0
  
  values:
    registry: docker.io
    tag: 5.0.0-preview.2

    k3s:
      enabled: true
    
  valuesFiles:
    - controller-values.yaml
    - cve-values.yaml
    - enforcer-values.yaml
    - manager-values.yaml

# This diff accounts for sslip.io being used on the manager Ingress resource (the Fleet repo will get perpetually stuck in "Modified") 
# and can safely be removed if not using an Ingress, or if using a fixed host for the manager Ingress resource.
diff:
  comparePatches:
  - apiVersion: networking.k8s.io/v1
    kind: Ingress
    name: neuvector-webui-ingress
    namespace: neuvector-system
    operations:
    - { "op": "remove", "path": "/spec/rules" }